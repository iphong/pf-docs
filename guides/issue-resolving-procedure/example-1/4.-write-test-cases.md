---
description: >-
  Display a survey to PageFly users to collect their needs for the Black Friday
  campaign.
---

# 4. Write test cases

Resuming the request to _“display a survey to PageFly users to collect their needs for the Black Friday campaign”_, regardless of which solution you choose in [step 3](3.-choose-one-solution.md), we will need to create a stand-alone component and place it where the survey needs to show.

Suppose stakeholders want to show the survey in a modal on the dashboard screen, we can add the following test cases to the list:

* _No modal should be opened if there is no active survey._
* _A modal containing one survey should be opened if there is an active survey._
* _A modal with pagination to navigate between multiple surveys should be opened if there is more than one active survey._

Depending on the chosen solution, you should expect how to implement it and continue adding test cases to the list. Suppose you choose the third solution, the following test cases can be added:

* _The server endpoint for getting survey data must return an empty array if there are some surveys in the database but no survey is active._
* _The server endpoint for getting survey data must return only the active survey as a single item array if there are some surveys in the database but only one survey is active._
* _The server endpoint for getting survey data must return all the active surveys as an array if there are several active surveys in the database._
* _The server endpoint for saving survey responses must return an error message if no user response or invalid data is posted to it._
* _The server endpoint for saving survey responses must save data and return a success message if a valid user response is posted to it._
* _The server endpoint for saving survey responses must save all data and return a success message if multiple valid user responses are posted to it._

{% hint style="info" %}
At this time, you need to submit a solution proposal. Open [this form](https://docs.google.com/forms/d/e/1FAIpQLSc8IcTnfy\_6Y92hScpEwUMpfWXQengWYQtxPXiXPbmStBWilw/viewform), fill in the following information, and submit the form. Wait for your solution proposal to be approved before continuing to [step 5](5.-test-and-code.md) to test and code until all test cases are covered.

**What is the problem?**

* Understand user needs to update PageFly to fulfill their needs for the Black Friday campaign via survey.
* To keep users using PageFly and using it frequently by fulfilling their needs at all times.
* We need to implement a solution that can flexibly collect users’ needs during a period and allow non-technical stakeholders to update the survey and see the results.

**Ways to solve the problem?**

1. The first solution is to code a stand-alone component that directly displays the predefined survey in the `pfcore` project and places it where the survey needs to show.
2. The second solution is defining surveys and their lifetime as a constant in the `pfserver` project and including the active survey in the global configuration. Then, code a stand-alone component in the `pfcore` project and place it where the survey needs to show. The component will look for any survey included in the global configuration and display it.
3. The third solution is creating a dedicated collection in the database for saving surveys and their lifetime. Then, we will create an endpoint in the `pfserver` project for returning the survey content that should be shown at the current time (active survey). Finally, code a stand-alone component in the `pfcore` project and place it where the survey needs to show. The component will automatically request the endpoint for an active survey and display it if available.

We need to allow non-technical stakeholders to see the user responses, so every solution must create an endpoint in the `pfserver` project to save user responses to a dedicated collection in the database. Then, we need to create a screen in AC2 to display the user responses to non-technical stakeholders.

**Which solution do you propose?**

The simplest and most effective solution is the third solution because:

* It can resolve multiple cases and changes can appear instantly.
* Updating existing surveys or creating new surveys can be done easily in the database without risks.

**What are the test cases you defined?**

1. On the `pfserver` project:\
   \- The server endpoint for getting survey data must return an empty array if there are some surveys in the database but no survey is active.\
   \- The server endpoint for getting survey data must return only the active survey as a single item array if there are some surveys in the database but only one survey is active.\
   \- The server endpoint for getting survey data must return all the active surveys as an array if there are several active surveys in the database.\
   \- The server endpoint for saving survey responses must return an error message if no user response or invalid data is posted to it.\
   \- The server endpoint for saving survey responses must save data and return a success message if a valid user response is posted to it.\
   \- The server endpoint for saving survey responses must save all data and return a success message if multiple valid user responses are posted to it.
2. On the `pfcore` project:\
   \- No modal should be opened if there is no active survey.\
   \- A modal containing one survey should be opened if there is an active survey.\
   \- A modal with pagination to navigate between multiple surveys should be opened if there is more than one active survey.
{% endhint %}

|                                                            Current step | Next step                                                         |
| ----------------------------------------------------------------------: | ----------------------------------------------------------------- |
| [4.-write-test-cases.md](../processes/4.-write-test-cases.md "mention") | [5.-test-and-code.md](../processes/5.-test-and-code.md "mention") |
